<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cart</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="../styles.css">
</head>

<body>

    <!-- top banner -->
    <div class="top-banner show">
        <p>Free Shipping on Orders Over PKR 5000</p>
        <!-- close -->
         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x close"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </div>

    <!-- menu -->
     <div class="menu">
        <ul>
            <li>
                <a href="#">Sweaters</a>
                <a href="#">Bottoms</a>
                <a href="#">Hoodies</a>
            </li>
            <li>
                <a href="./index.html" title="view-cart"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-bag-icon lucide-shopping-bag"><path d="M16 10a4 4 0 0 1-8 0"/><path d="M3.103 6.034h17.794"/><path d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"/></svg>
                Cart</a>
                <!-- <a href="../pages/Login.html" title="Login"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-icon lucide-user-round"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 0 0-16 0"/></svg>
                Login</a> -->
            </li>
        </ul>
     </div>

    <!-- navbar -->
    <nav>
        <ul>
            <li class="shop-menu">SHOP</li>
            <li><a href="../homepage.html">LOGO</a></li>
            <li>
                <a href="../ali/ali.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg></a>

                <a href="../pages/Login.html" title="Login" class="hide-on-mobile-screen" id="user-profile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round-icon lucide-user-round"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 0 0-16 0"/></svg>
                    <div class="loggedInUserInfo">
                        <div><strong>Account Id: </strong> <p class="account-id"></p></div>
                        <div><strong>Username: </strong> <p class="account-username"></p></div>
                        <a href="/public/admin/dashboard.html" class="admin-dashboard-button">Admin Dashboard</a>
                        <button class="logout_user">Logout</button>
                    </div>
                </a>

                <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-bag-icon lucide-shopping-bag"><path d="M16 10a4 4 0 0 1-8 0"/><path d="M3.103 6.034h17.794"/><path d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"/></svg></a>
            </li>
        </ul>
    </nav>

    <main>
        <div class="page-container">
            <h1 class="page-title">Your Product Cart</h1>

            <section class="product-grid" aria-label="Product details">
               <table>
                    <tr>
                        <th>S.No.</th>
                        <th>Type</th>
                        <th>Name</th>
                        <th>Size</th>
                        <th>Color</th>
                        <th>Price</th>
                    </tr>
                    <tr>
                    </tr>
               </table>
                
            </section>

            <div>
                <!-- <h3>Total Amount</h3> -->
            </div>
        </div>
    </main>

    <!-- footer -->
    <footer class="footer">
            <div class="footer-section">
                <h4>ABOUT US</h4>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Aperiam exercitationem expedita sint dicta veniam iusto voluptatem provident corporis assumenda cum, hic beatae ab. Cupiditate repudiandae ipsa aspernatur ad, ullam distinctio.</p>
            </div>
            <div class="footer-section">
                <h4>QUICK LINKS</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Faq's</a></li>
                    <li><a href="#">Exchange & returns</a></li>
                    <li><a href="#">Shipping Policy</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Track Your Order</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>FIND US ON</h4>
                <ul class="social-media">
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Whatsapp</a></li>
                </ul>
            </div>
            <div class="footer-section footer-bottom">
                &copy; 2025 BRANDNAME.
            </div>
        </footer>
    <script src="../global.js"></script>
    <script>
        
        async function renderCart() {
            const cart = getCart();
            const productIds = Object.keys(cart);

            if (productIds.length === 0) {
                document.querySelector("table").innerHTML += `
                <tr><td colspan="6" style="text-align:center; height: 40dvh;"><strong>Cart is empty</strong></td></tr>
                `;
                return;
            }

            // fetch product details
            const res = await fetch("/api/products/bulk-ids", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ productIds })
            });
            
            if(!res.ok) {
                console.log("error", res || "")
            }
            
            const products = await res.json();
            
            const table = document.querySelector("table");
            
            products.forEach((p, i) => {
                const qty = cart[p._id].qty;
                
                table.innerHTML += `
                <tr>
                    <td>${i + 1}</td>
                    <td>${p.productType}</td>
                    <td>${p.name}</td>
                    <td>${p.size[0]}</td>
                    <td>${p.color[0]}</td>
                    <td>PKR ${p.price} Ã— ${qty}</td>
                    </tr>
                    `;
                });
            }
            
            renderCart();
    </script>
    <script src="../handleTopBanner.js" defer></script>
</body>
</html>